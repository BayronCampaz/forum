(this.webpackJsonpforum=this.webpackJsonpforum||[]).push([[0],{20:function(e,a,t){"use strict";t.r(a),function(e){var a=t(1),s=t(36);e.exports={hash:function(e){for(var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=a.salt?a.salt:(new Date).getTime(),r=a.rounds?a.rounds:10,n=s(e+t),l=0;l<=r;l++)n=s(n);return"".concat(t,"$").concat(r,"$").concat(n)},compare:function(e,t){try{var s=t.split("$"),r=Object(a.a)(s,2),n=r[0],l=r[1];return t===this.hash(e,{salt:n,rounds:l})}catch(i){throw Error(i.message)}}}}.call(this,t(35)(e))},29:function(e,a,t){e.exports=t(45)},34:function(e,a,t){},45:function(e,a,t){"use strict";t.r(a);var s=t(0),r=t.n(s),n=t(18),l=t.n(n),i=(t(34),t(4)),o=t(3),m=t(1),c=t(7),u=function(e){sessionStorage.removeItem("user"),sessionStorage.removeItem("admin");var a=Object(s.useState)({email:"",password:""}),n=Object(m.a)(a,2),l=n[0],u=n[1],d=Object(s.useState)({error:!1,message:""}),g=Object(m.a)(d,2),f=g[0],b=g[1],p=l.email,v=l.password,h=function(e){u(Object(o.a)({},l,Object(i.a)({},e.target.name,e.target.value))),b({error:!1,message:""})};return r.a.createElement("div",{className:"form-login"},r.a.createElement("div",{className:"container-form"},r.a.createElement("h1",null,"Iniciar Sesi\xf3n"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),""!==p.trim()&&""!==v.trim()?window.firebase.firestore().collection("users").doc(l.email).get().then((function(a){if(a.exists){var s=a.data();t(20).compare(l.password,s.password)?s.rol?(sessionStorage.setItem("admin",JSON.stringify(s)),e.history.push("/home-admin")):(sessionStorage.setItem("user",JSON.stringify(s)),e.history.push("/home")):b({error:!0,message:"La contrase\xf1a es incorrecta"})}else window.firebase.firestore().collection("users").doc(l.email).delete(),b({error:!0,message:"El email no se encuentra registrado"})})):b({error:!0,message:"No pueden haber campos vacios"})}},r.a.createElement("div",{className:"element-form"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",name:"email",value:p,placeholder:"Email",onChange:h})),r.a.createElement("div",{className:"element-form"},r.a.createElement("label",{htmlFor:"password"},"Contrase\xf1a"),r.a.createElement("input",{type:"password",id:"password",name:"password",value:v,placeholder:"Contrase\xf1a",onChange:h})),r.a.createElement("div",{className:"element-form"},r.a.createElement("input",{type:"submit",className:"btn btn-primary btn-block",value:"Iniciar Sesi\xf3n"}))),r.a.createElement(c.b,{to:"/register",className:"link-account"},"Registrarse"),f.error&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},f.message)))},d=function(e){sessionStorage.removeItem("user");var a=Object(s.useState)({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",active:!0}),n=Object(m.a)(a,2),l=n[0],u=n[1],d=Object(s.useState)({error:!1,message:""}),g=Object(m.a)(d,2),f=g[0],b=g[1],p=l.firstName,v=l.lastName,h=l.email,E=l.password,N=l.confirmPassword,w=l.active,S=function(e){u(Object(o.a)({},l,Object(i.a)({},e.target.name,e.target.value))),b({error:!1,message:""})};return r.a.createElement("div",{className:"form-login"},r.a.createElement("div",{className:"container-form"},r.a.createElement("h1",null,"Registrarse"),r.a.createElement("form",{onSubmit:function(a){if(a.preventDefault(),""!==p.trim()&&""!==v.trim()&&""!==h.trim()&&""!==E.trim()&&""!==N.trim())if(E.length<6)b({error:!0,message:"La contrase\xf1a debe tener al menos 6 caracteres"});else if(E===N){var s=t(20).hash(l.password);u(Object(o.a)({},l,{password:s}));var r={firstName:p,lastName:v,email:h,password:s,active:w};window.firebase.firestore().collection("users").doc(l.email).get().then((function(a){a.exists?(b({error:!0,message:"El email ya se encuentra registrado"}),u(Object(o.a)({},l,{email:"",password:"",confirmPassword:""}))):(window.firebase.firestore().collection("users").doc(r.email).set(r),sessionStorage.setItem("user",JSON.stringify(r)),e.history.push("/home"))}))}else b({error:!0,message:"Las contrase\xf1as no concuerdan"});else b({error:!0,message:"No pueden haber campos vacios"})}},r.a.createElement("div",{className:"element-form"},r.a.createElement("label",{htmlFor:"firstName"},"Nombres"),r.a.createElement("input",{type:"text",id:"firstName",name:"firstName",value:p,placeholder:"Nombres",onChange:S})),r.a.createElement("div",{className:"element-form"},r.a.createElement("label",{htmlFor:"lastName"},"Apellidos"),r.a.createElement("input",{type:"text",id:"lastName",name:"lastName",value:v,placeholder:"Apellidos",onChange:S})),r.a.createElement("div",{className:"element-form"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",name:"email",value:h,placeholder:"Email",onChange:S})),r.a.createElement("div",{className:"element-form"},r.a.createElement("label",{htmlFor:"password"},"Contrase\xf1a"),r.a.createElement("input",{type:"password",id:"password",name:"password",value:E,placeholder:"Contrase\xf1a",onChange:S})),r.a.createElement("div",{className:"element-form"},r.a.createElement("label",{htmlFor:"confirmPassword"},"Confirmar Contrase\xf1a"),r.a.createElement("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:N,placeholder:"Reescribe tu contrase\xf1a",onChange:S})),r.a.createElement("div",{className:"element-form"},r.a.createElement("input",{type:"submit",className:"btn btn-primary btn-block",value:"Registrarse"}))),r.a.createElement(c.b,{to:"/",className:"link-account"},"Inicio de sesi\xf3n"),f.error&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},f.message)))},g=t(11),f=t(12),b=t(15),p=t(13),v=t(14),h=function(e){var a=new Date(1e3*e.message.date.seconds+e.message.date.nanoseconds/1e3),t="".concat(a.getDate(),"-").concat(a.getMonth()+1,"-").concat(a.getFullYear(),"    ").concat(a.getHours(),":").concat(a.getMinutes());console.log(a);var s=function(a){a.preventDefault(),e.parentCallback(e.message)},n=e.message.user.email===JSON.parse(sessionStorage.getItem("user")).email;return r.a.createElement("div",{className:"media message mb-1"},r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/1200px-Circle-icons-profile.svg.png",className:"size-image mr-3 p-3",alt:"..."}),r.a.createElement("div",{className:"media-body  p-3"},r.a.createElement("a",{className:"mt-0 btn-outline-danger",href:"",onClick:s},r.a.createElement("strong",null,e.message.title)),r.a.createElement("h4",null,e.message.description),n&&r.a.createElement("a",{className:"mt-2 mr-5 pt-1 pb-1 pl-5 pr-5 btn btn-danger",role:"alert",onClick:function(a){a.preventDefault(),e.parentCallbackEdit(e.message)}},"  Editar  "),n&&r.a.createElement("a",{className:"mt-2 pt-1 pb-1 pl-5 pr-5 btn btn-danger",role:"alert",onClick:function(a){a.preventDefault(),e.parentCallbackDelete(e.message),window.firebase.firestore().collection("messages").doc(e.message.id).delete()}},"  Eliminar  ")),r.a.createElement("div",{className:"m-4 center-block"},r.a.createElement("a",{className:"mb-4 align-middle",href:"/",onClick:s}," ",e.message.replies.length," respuestas"),r.a.createElement("h5",null,e.message.user.firstName+" "+e.message.user.lastName," "),r.a.createElement("h5",null,t)))},E=function(e){Object(v.a)(t,e);var a=Object(p.a)(t);function t(e){var s;return Object(g.a)(this,t),(s=a.call(this,e)).getSelectedMessage=function(e){s.setState({message:e,messageError:""})},s.getEditMessage=function(e){s.props.editMessage(e)},s.getDeleteMessage=function(e){s.componentDidMount()},s.onChange=function(e){var a;s.setState(Object(o.a)({},s.state,(a={},Object(i.a)(a,e.target.name,e.target.value),Object(i.a)(a,"errorMessage",""),a)))},s.onSubmit=function(e){if(e.preventDefault(),""!==s.state.comment.trim()){var a=s.state.message,t={id:s.state.message.replies.length,description:s.state.comment,user:JSON.parse(sessionStorage.getItem("user"))};a.replies.push(t),s.setState({message:a,comment:"",errorMessage:""}),console.log(a),window.firebase.firestore().collection("messages").doc(a.id).set(s.state.message)}else s.setState(Object(o.a)({},s.state,{messageError:"No pueden haber campos vacios"}))},s.state={messages:[],comment:""},s.getSelectedMessage=s.getSelectedMessage.bind(Object(b.a)(s)),s.onChange=s.onChange.bind(Object(b.a)(s)),s.onSubmit=s.onSubmit.bind(Object(b.a)(s)),s}return Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=[];window.firebase.firestore().collection("messages").get().then((function(t){t.forEach((function(e){a.push(e.data()),console.log(e.id," => ",e.data())})),e.setState({messages:a})})),console.log(this.state)}},{key:"render",value:function(){var e=this,a=this.state.messages;if(this.state.message){var t=this.state.message,s=(t.id,t.title),n=t.description,l=t.date,i=t.user,o=t.replies,m=new Date(1e3*l.seconds+l.nanoseconds/1e3),c="".concat(m.getDate(),"-").concat(m.getMonth()+1,"-").concat(m.getFullYear(),"    ").concat(m.getHours(),":").concat(m.getMinutes());return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"media message m-5 "},r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/1200px-Circle-icons-profile.svg.png",className:"size-image mr-3 p-3",alt:"..."}),r.a.createElement("div",{className:"media-body  p-3"},r.a.createElement("h3",{className:"mt-0"},r.a.createElement("strong",null,s)),r.a.createElement("h4",null,n),o.map((function(e){return r.a.createElement("div",{class:"media message m-5",key:e.id},r.a.createElement("a",{class:"mr-3",href:"#"},r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/1200px-Circle-icons-profile.svg.png",className:"size-image mr-3 p-3",alt:"..."})),r.a.createElement("div",{class:"media-body pt-4"},r.a.createElement("h5",{class:"mt-0"},e.user.firstName+" "+e.user.lastName),e.description))}))),r.a.createElement("div",{className:"m-4 center-block"},r.a.createElement("h4",{className:"mb-4 align-middle"}," ",o.length," respuestas"),r.a.createElement("h5",null,i.firstName+" "+i.lastName," "),r.a.createElement("h5",null,c))),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"element-form"},r.a.createElement("textarea",{className:"form-control textarea",id:"comment",name:"comment",value:this.state.comment,placeholder:"Comentarios",onChange:this.onChange,rows:"3"})),r.a.createElement("input",{type:"submit",className:"btn btn-dark btn-block",value:"Comentar"})),this.state.errorMessage&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},this.state.errorMessage))}return r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"m-4 title-forum"},"Publicaciones del Foro"),a.map((function(a){return r.a.createElement(h,{key:a.id,message:a,parentCallback:e.getSelectedMessage,parentCallbackEdit:e.getEditMessage,parentCallbackDelete:e.getDeleteMessage})})))}}]),t}(s.Component),N=t(9),w=function(e){var a=sessionStorage.getItem("user")?JSON.parse(sessionStorage.getItem("user")):JSON.parse(sessionStorage.getItem("admin")),n=Object(s.useState)({firstName:a.firstName,lastName:a.lastName,email:a.email,password:"",active:a.active}),l=Object(m.a)(n,2),c=l[0],u=l[1],d=Object(s.useState)({isDisabled:!0,valueButton:"Editar informacion"}),g=Object(m.a)(d,2),f=g[0],b=g[1],p=Object(s.useState)({error:!1,message:""}),v=Object(m.a)(p,2),h=v[0],E=v[1],N=c.firstName,w=c.lastName,S=c.email,y=c.password,O=(c.active,function(e){u(Object(o.a)({},c,Object(i.a)({},e.target.name,e.target.value))),E({error:!1,message:""})});return r.a.createElement("div",{className:"form-login"},r.a.createElement("div",{className:"container-form"},r.a.createElement("h1",null,"PERFIL"),r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),f.isDisabled)b({isDisabled:!1,valueButton:"Confirmar cambios"});else{if(""===N.trim()||""===w.trim()||""===S.trim()||""===y.trim())return void E({error:!0,message:"No pueden haber campos vacios"});if(y.length<6)return void E({error:!0,message:"La contrase\xf1a debe tener al menos 6 caracteres"});var a=t(20).hash(c.password),s={firstName:c.firstName,lastName:c.lastName,email:c.email,password:a,active:c.active};console.log(c),window.firebase.firestore().collection("users").doc(s.email).set(s),sessionStorage.removeItem("user"),sessionStorage.setItem("user",JSON.stringify(s)),b({isDisabled:!0,valueButton:"Editar informacion"}),console.log(c)}}},r.a.createElement("div",{className:"element-form"},r.a.createElement("label",{htmlFor:"firstName"},"Nombres"),r.a.createElement("input",{type:"text",id:"firstName",name:"firstName",value:N,placeholder:"Nombres",onChange:O,disabled:f.isDisabled})),r.a.createElement("div",{className:"element-form"},r.a.createElement("label",{htmlFor:"lastName"},"Apellidos"),r.a.createElement("input",{type:"text",id:"lastName",name:"lastName",value:w,placeholder:"Apellidos",onChange:O,disabled:f.isDisabled})),r.a.createElement("div",{className:"element-form"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",name:"email",value:S,placeholder:"Email",onChange:O,disabled:f.isDisabled})),r.a.createElement("div",{className:"element-form"},r.a.createElement("label",{htmlFor:"password"},"Contrase\xf1a"),r.a.createElement("input",{type:"password",id:"password",name:"password",value:y,placeholder:"Contrase\xf1a",onChange:O,disabled:f.isDisabled})),r.a.createElement("div",{className:"element-form"},r.a.createElement("input",{type:"submit",className:"btn btn-primary btn-block",value:f.valueButton}))),h.error&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},h.message)))},S=function(e){Object(v.a)(t,e);var a=Object(p.a)(t);function t(e){var s;return Object(g.a)(this,t),(s=a.call(this,e)).state={firstName:e.firstName,lastName:"",email:"",active:!0,numMessages:0},s}return Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.firebase.firestore().collection("users").where("firstName","==",this.state.firstName).get().then((function(a){console.log(a),a.forEach((function(a){if(a.data().firstName){var t=0;window.firebase.firestore().collection("messages").where("user.email","==",a.data().email).get().then((function(a){a.forEach((function(a){t++,console.log(t),console.log(a.id," =>>>>>>>>>>>>> ",a.data()),e.setState({numMessages:t})}))})).catch((function(e){console.log("Error getting documents: ",e)})),console.log("--------\x3e "+t),e.setState({firstName:a.data().firstName,lastName:a.data().lastName,email:a.data().email,active:a.data().active,numMessages:t})}console.log(a.id," =>>>>>>>>>>>>> ",a.data())}))})).catch((function(e){console.log("Error getting documents: ",e)}))}},{key:"render",value:function(){return this.state.email?r.a.createElement("div",{className:"form-login"},r.a.createElement("div",{className:"container-form"},r.a.createElement("h1",null,"Datos de la busqueda"),r.a.createElement("div",{className:"element-form"},r.a.createElement("label",{htmlFor:"firstName"},"Nombres"),r.a.createElement("input",{type:"text",id:"firstName",name:"firstName",value:this.state.firstName,disabled:!0})),r.a.createElement("div",{className:"element-form"},r.a.createElement("label",{htmlFor:"lastName"},"Apellidos"),r.a.createElement("input",{type:"text",id:"lastName",name:"lastName",value:this.state.lastName,disabled:!0})),r.a.createElement("div",{className:"element-form"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",name:"email",value:this.state.email,disabled:!0})),this.state.active&&r.a.createElement("div",{className:"alert alert-success",role:"alert"},"El usuario esta activo"),!this.state.active&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"El usuario esta inactivo"),r.a.createElement("label",{className:"element-form"}," Numero de mensajes : ",this.state.numMessages))):r.a.createElement("div",{className:"form-login"},r.a.createElement("div",{className:"container-form"},r.a.createElement("h1",null,"No se encontro ning\xfan usuario con ese nombre")))}}]),t}(s.Component),y=function(e){var a=Object(s.useState)({id:"",title:"",description:"",date:"",user:JSON.parse(sessionStorage.getItem("user")),replies:[]}),t=Object(m.a)(a,2),n=t[0],l=t[1];Object(s.useEffect)((function(){e.message&&l({id:e.message.id,title:e.message.title,description:e.message.description,date:e.message.date,user:JSON.parse(sessionStorage.getItem("user")),replies:e.message.replies})}),[]);var c=Object(s.useState)({error:!1,message:""}),u=Object(m.a)(c,2),d=u[0],g=u[1],f=(n.id,n.title),b=n.description,p=(n.date,n.user,n.replies),v=function(e){l(Object(o.a)({},n,Object(i.a)({},e.target.name,e.target.value))),g({error:!1,message:""})};return r.a.createElement("div",{className:"form-login"},r.a.createElement("div",{className:"container-new-message"},r.a.createElement("h1",null,"Nueva Publicacion"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==f.trim()&&""!==b.trim()?(l(Object(o.a)({},n,{date:window.firebase.firestore.Timestamp.fromDate(new Date)})),""!==n.id&&window.firebase.firestore().collection("messages").doc(n.id).delete(),window.firebase.firestore().collection("messages").add({message:n}).then((function(e){console.log("Document written with ID: ",e.id),l(Object(o.a)({},n,{id:e.id}));var a={id:e.id,title:f,description:b,date:window.firebase.firestore.Timestamp.fromDate(new Date),user:JSON.parse(sessionStorage.getItem("user")),replies:p};window.firebase.firestore().collection("messages").doc(e.id).set(a),l({id:"",title:"",description:"",date:"",user:JSON.parse(sessionStorage.getItem("user")),replies:[]})})).catch((function(e){console.error("Error adding document: ",e)})),alert("Publicacion realizada exitosamente")):g({error:!0,message:"No pueden haber campos vacios"})}},r.a.createElement("label",{htmlFor:"email"},"Titulo"),r.a.createElement("div",{className:"element-form"},r.a.createElement("input",{type:"text",id:"title",name:"title",value:f,placeholder:"Escribe el titulo de la publicacion",onChange:v})),r.a.createElement("label",{htmlFor:"password"},"Descripcion"),r.a.createElement("div",{className:"element-form"},r.a.createElement("textarea",{className:"form-control textarea",id:"description",name:"description",value:b,placeholder:"Escribe la descripcion de la publicacion",onChange:v,rows:"5"})),r.a.createElement("div",{className:"element-form"},r.a.createElement("input",{type:"submit",className:"btn btn-primary btn-block",value:"Publicar"}))),d.error&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},d.message)))},O=function(){var e=Object(s.useState)({actualState:"forum"}),a=Object(m.a)(e,2),t=a[0],n=a[1],l=Object(s.useState)({inputSearch:""}),i=Object(m.a)(l,2),u=i[0],d=i[1],g=Object(s.useState)({keyForum:0,keySearch:0}),f=Object(m.a)(g,2),b=f[0],p=f[1];return r.a.createElement(N.b,null,sessionStorage.getItem("user")?r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("button",{className:"btn btn-outline-danger my-2 my-sm-0",onClick:function(){n({actualState:"forum"});var e=b.keyForum+1;p(Object(o.a)({},b,{keyForum:e}))}},"Forum"),r.a.createElement("div",{className:"collapse navbar-collapse ml-5",id:"navbarSupportedContent"},r.a.createElement("form",{className:"form-inline mr-auto",onSubmit:function(e){e.preventDefault(),n({actualState:"search"});var a=b.keySearch+1;p(Object(o.a)({},b,{keySearch:a}))}},r.a.createElement("input",{className:"form-control mr-sm-2",type:"search",value:u.inputSearch,placeholder:"Buscar","aria-label":"Search",onChange:function(e){d({inputSearch:e.target.value})}}),r.a.createElement("button",{className:"btn btn-outline-danger my-2 my-sm-0",type:"submit"},"Buscar")),r.a.createElement("button",{className:"btn btn-danger my-2 my-sm-0 m-5",onClick:function(){n({actualState:"newMessage"})}},"Publicar Mensaje"),r.a.createElement("ul",{className:"navbar-nav my-2 my-lg-0"},r.a.createElement("li",null,r.a.createElement("button",{className:"btn btn-outline-danger my-2 my-sm-0",onClick:function(){n({actualState:"profile"})}},"Ver Perfil")),r.a.createElement("li",null,r.a.createElement(c.b,{to:"/",className:"btn btn-outline-danger my-2 my-sm-0"},"Cerrar sesi\xf3n"))))),"forum"===t.actualState?r.a.createElement(E,{key:b.keyForum,editMessage:function(e){e&&n({actualState:"editMessage",message:e})}}):"profile"===t.actualState?r.a.createElement(w,null):"search"===t.actualState?r.a.createElement(S,{firstName:u.inputSearch,key:b.keySearch}):"newMessage"===t.actualState?r.a.createElement(y,null):r.a.createElement(y,{message:t.message})):sessionStorage.getItem("admin")?r.a.createElement(N.a,{to:"/home-admin"}):r.a.createElement(N.a,{to:"/"}))},k=t(17),j=t.n(k),C=t(23);var D=document.getElementById("modal"),M=function(e){var a=e.children,t=Object(s.useRef)(null);if(!t.current){var l=document.createElement("div");t.current=l}return Object(s.useEffect)((function(){return D.appendChild(t.current),function(){return D.removeChild(t.current)}}),[]),Object(n.createPortal)(r.a.createElement("div",null,a),t.current)},x=function(e){Object(v.a)(t,e);var a=Object(p.a)(t);function t(){var e;return Object(g.a)(this,t),(e=a.call(this)).state={loading:!0,users:[],showModal:!1,emailDelete:""},e}return Object(f.a)(t,[{key:"updateUsers",value:function(){var e=Object(C.a)(j.a.mark((function e(){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,window.firebase.firestore().collection("users").get().then((function(e){e.forEach((function(e){a.push(e.data()),console.log(e.data())}))}));case 3:this.setState({users:a,loading:!1,showModal:!1}),console.log("hizofetch",this.state);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"activationUser",value:function(){var e=Object(C.a)(j.a.mark((function e(a,t){var s=this;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.firebase.firestore().collection("users").doc(a).update({active:t}),setTimeout((function(){s.updateUsers()}),1e3);case 2:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()},{key:"deleteUser",value:function(e){var a=this,t=!1;window.firebase.firestore().collection("messages").where("user.email","==",e).get().then((function(a){a.forEach((function(e){e.exists&&(t=!0)})),t?alert("posee mensajes asociados, no se puede eliminar"):(alert("Eliminado Exitosamente!"),window.firebase.firestore().collection("users").doc(e).delete().then((function(){})).catch((function(e){console.error("Error removing document: ",e)})))})).catch((function(e){console.log("Error getting documents: ",e)})),this.setState({loading:!0}),setTimeout((function(){a.updateUsers()}),3e3)}},{key:"componentDidMount",value:function(){this.updateUsers()}},{key:"deleteAction",value:function(e){this.setState({emailDelete:e,showModal:!this.state.showModal})}},{key:"render",value:function(){var e=this;if(this.state.loading)return r.a.createElement("h1",null,"Loading ...");var a=this.state,t=a.users,s=a.showModal,n=a.emailDelete;return r.a.createElement("div",null,0===t.length?r.a.createElement("h1",null,"No Users found"):t.filter((function(e){return e.email!==JSON.parse(sessionStorage.getItem("admin")).email})).map((function(a){return r.a.createElement("div",{key:a.email,className:"media user m-5"},r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/1200px-Circle-icons-profile.svg.png",className:"size-image mr-3 p-3",alt:"..."}),r.a.createElement("div",{className:"w-50"},r.a.createElement("h3",{className:"media-heading"},"Email: ",a.email," ",r.a.createElement("span",{className:a.active?"badge badge-success":"badge badge-danger"},a.active?"Activo":"Inactivo")),r.a.createElement("h3",{className:"media-heading"},"firstName: ",a.firstName),r.a.createElement("h3",{className:"media-heading"},"lastName: ",a.lastName)),r.a.createElement("button",{className:a.active?"btn btn-danger":"btn btn-success",onClick:function(){return e.activationUser(a.email,!a.active)}},a.active?"Desactivar":"Activar"),r.a.createElement("button",{className:"btn btn-dark ml-5",value:a.email,onClick:function(a){return e.deleteAction(a.target.value)}},"Borrar"))})),s?r.a.createElement(M,null,r.a.createElement("div",null,r.a.createElement("h1",null,"Desea eliminar a ",n,"?"),r.a.createElement("button",{onClick:function(){return e.deleteUser(n)}},"S\xed"),r.a.createElement("button",{onClick:function(){return e.deleteAction("")}},"No"))):null)}}]),t}(s.Component),I=function(){var e=Object(s.useState)("HomeAdmin"),a=Object(m.a)(e,2),t=a[0],n=a[1],l=Object(s.useState)("Welcome!"),i=Object(m.a)(l,2),o=i[0],u=i[1];return r.a.createElement(N.b,null,sessionStorage.getItem("admin")?r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("div",{className:"collapse navbar-collapse ml-5",id:"navbarSupportedContent"},r.a.createElement("div",{className:"navbar-brand mr-auto",onClick:"HomeAdmin"===t?null:function(){n({actualState:"HomeAdmin"}),u("Welcome!")}},"Admin Dashboard"),r.a.createElement("ul",{className:"navbar-nav my-2 my-lg-0"},r.a.createElement("li",null,r.a.createElement("button",{className:"btn btn-outline-danger my-2 my-sm-0",onClick:"Users"===t?null:function(){n({actualState:"Users"}),u("Usuarios")}},"Usuarios")),r.a.createElement("li",null,r.a.createElement("button",{className:"btn btn-outline-danger my-2 my-sm-0",onClick:"Profile"===t?null:function(){n({actualState:"Profile"}),u("Perfil")}},"Ver Perfil")),r.a.createElement("li",null,r.a.createElement(c.b,{to:"/",className:"btn btn-outline-danger my-2 my-sm-0"},"Cerrar sesi\xf3n"))))),r.a.createElement("div",{className:"container-form my-auto mx-auto"},r.a.createElement("h1",{className:"display-4 my-auto mx-auto text-center"},o)),"Profile"===t.actualState?r.a.createElement(w,null):"Users"===t.actualState?r.a.createElement(x,null):null):sessionStorage.getItem("user")?r.a.createElement(N.a,{to:"/home"}):r.a.createElement(N.a,{to:"/"}))};var F=function(){return r.a.createElement(c.a,{basename:"/"},r.a.createElement(N.d,null,r.a.createElement(N.b,{exact:!0,path:"/",component:u}),r.a.createElement(N.b,{exact:!0,path:"/register",component:d}),r.a.createElement(N.b,{exact:!0,path:"/home",component:O}),r.a.createElement(N.b,{exact:!0,path:"/home-admin",component:I})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.86abe722.chunk.js.map